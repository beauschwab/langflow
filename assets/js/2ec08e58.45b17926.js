"use strict";(self.webpackChunklangflow_docs=self.webpackChunklangflow_docs||[]).push([[4371],{17682:(e,t,n)=>{n.r(t),n.d(t,{CH:()=>l,assets:()=>c,chCodeConfig:()=>h,contentTitle:()=>d,default:()=>m,frontMatter:()=>i,metadata:()=>o,toc:()=>p});const o=JSON.parse('{"id":"Integrations/DataHub/datahub-agent-metadata-enrichment","title":"DataHub Metadata Enrichment Agent","description":"This tutorial shows you how to build an AI agent that can search, explore, and enrich metadata in DataHub using natural language. The agent uses DataHub components as tools to autonomously discover datasets, inspect their metadata, and add documentation, tags, glossary terms, and domains.","source":"@site/docs/Integrations/DataHub/datahub-agent-metadata-enrichment.md","sourceDirName":"Integrations/DataHub","slug":"/integrations/datahub/metadata-enrichment-agent","permalink":"/integrations/datahub/metadata-enrichment-agent","draft":false,"unlisted":false,"tags":[],"version":"current","frontMatter":{"title":"DataHub Metadata Enrichment Agent","slug":"/integrations/datahub/metadata-enrichment-agent"},"sidebar":"docs","previous":{"title":"Integrate DataHub with Langflow","permalink":"/integrations/datahub/setup"},"next":{"title":"DataHub Technical Reference","permalink":"/integrations/datahub/technical-reference"}}');var a=n(74848),s=n(28453),r=n(24754);const i={title:"DataHub Metadata Enrichment Agent",slug:"/integrations/datahub/metadata-enrichment-agent"},d="Build a DataHub metadata enrichment agent",c={},l={annotations:r.hk,Code:r.Cy},h={staticMediaQuery:"not screen, (max-width: 768px)",lineNumbers:!0,showCopyButton:!0,themeName:"github-dark"},p=[{value:"Prerequisites",id:"prerequisites",level:2},{value:"Overview",id:"overview",level:2},{value:"Build the flow",id:"build-the-flow",level:2},{value:"1. Add the Agent",id:"1-add-the-agent",level:3},{value:"2. Add DataHub tools",id:"2-add-datahub-tools",level:3},{value:"3. Add Chat Input and Output",id:"3-add-chat-input-and-output",level:3},{value:"4. (Optional) Add system prompt context",id:"4-optional-add-system-prompt-context",level:3},{value:"Example conversations",id:"example-conversations",level:2},{value:"Data discovery",id:"data-discovery",level:3},{value:"Metadata inspection",id:"metadata-inspection",level:3},{value:"Impact analysis",id:"impact-analysis",level:3},{value:"Metadata enrichment",id:"metadata-enrichment",level:3},{value:"Best practices",id:"best-practices",level:2},{value:"Start read-only",id:"start-read-only",level:3},{value:"Use specific prompts",id:"use-specific-prompts",level:3},{value:"Validate before writing",id:"validate-before-writing",level:3},{value:"Batch operations",id:"batch-operations",level:3},{value:"Combine with MCP",id:"combine-with-mcp",level:3},{value:"Additional resources",id:"additional-resources",level:2}];function u(e){const t={a:"a",admonition:"admonition",em:"em",h1:"h1",h2:"h2",h3:"h3",header:"header",li:"li",ol:"ol",p:"p",strong:"strong",table:"table",tbody:"tbody",td:"td",th:"th",thead:"thead",tr:"tr",ul:"ul",...(0,s.R)(),...e.components};return l||g("CH",!1),l.Code||g("CH.Code",!0),(0,a.jsxs)(a.Fragment,{children:[(0,a.jsx)("style",{dangerouslySetInnerHTML:{__html:'[data-ch-theme="github-dark"] {  --ch-t-colorScheme: dark;--ch-t-foreground: #c9d1d9;--ch-t-background: #0d1117;--ch-t-lighter-inlineBackground: #0d1117e6;--ch-t-editor-background: #0d1117;--ch-t-editor-foreground: #c9d1d9;--ch-t-editor-lineHighlightBackground: #6e76811a;--ch-t-editor-rangeHighlightBackground: #ffffff0b;--ch-t-editor-infoForeground: #3794FF;--ch-t-editor-selectionBackground: #264F78;--ch-t-focusBorder: #1f6feb;--ch-t-tab-activeBackground: #0d1117;--ch-t-tab-activeForeground: #c9d1d9;--ch-t-tab-inactiveBackground: #010409;--ch-t-tab-inactiveForeground: #8b949e;--ch-t-tab-border: #30363d;--ch-t-tab-activeBorder: #0d1117;--ch-t-editorGroup-border: #30363d;--ch-t-editorGroupHeader-tabsBackground: #010409;--ch-t-editorLineNumber-foreground: #6e7681;--ch-t-input-background: #0d1117;--ch-t-input-foreground: #c9d1d9;--ch-t-input-border: #30363d;--ch-t-icon-foreground: #8b949e;--ch-t-sideBar-background: #010409;--ch-t-sideBar-foreground: #c9d1d9;--ch-t-sideBar-border: #30363d;--ch-t-list-activeSelectionBackground: #6e768166;--ch-t-list-activeSelectionForeground: #c9d1d9;--ch-t-list-hoverBackground: #6e76811a;--ch-t-list-hoverForeground: #c9d1d9; }'}}),"\n",(0,a.jsx)(t.header,{children:(0,a.jsx)(t.h1,{id:"build-a-datahub-metadata-enrichment-agent",children:"Build a DataHub metadata enrichment agent"})}),"\n",(0,a.jsx)(t.p,{children:"This tutorial shows you how to build an AI agent that can search, explore, and enrich metadata in DataHub using natural language. The agent uses DataHub components as tools to autonomously discover datasets, inspect their metadata, and add documentation, tags, glossary terms, and domains."}),"\n",(0,a.jsx)(t.h2,{id:"prerequisites",children:"Prerequisites"}),"\n",(0,a.jsxs)(t.ul,{children:["\n",(0,a.jsx)(t.li,{children:(0,a.jsx)(t.a,{href:"/integrations/datahub/setup",children:"DataHub setup in Langflow"})}),"\n",(0,a.jsxs)(t.li,{children:[(0,a.jsx)(t.a,{href:"https://platform.openai.com/",children:"An OpenAI API key"})," (or another LLM provider)"]}),"\n",(0,a.jsx)(t.li,{children:"A running DataHub instance with some datasets ingested"}),"\n"]}),"\n",(0,a.jsx)(t.h2,{id:"overview",children:"Overview"}),"\n",(0,a.jsx)(t.p,{children:"The metadata enrichment agent combines multiple DataHub components as tools for an AI agent. The agent can then respond to natural language requests like:"}),"\n",(0,a.jsxs)(t.ul,{children:["\n",(0,a.jsx)(t.li,{children:(0,a.jsx)(t.em,{children:'"Find all datasets related to customer transactions"'})}),"\n",(0,a.jsx)(t.li,{children:(0,a.jsx)(t.em,{children:'"Show me the schema and owners of the orders table"'})}),"\n",(0,a.jsx)(t.li,{children:(0,a.jsx)(t.em,{children:'"What tables are downstream of the customer_events dataset?"'})}),"\n",(0,a.jsx)(t.li,{children:(0,a.jsx)(t.em,{children:'"Add PII tags to the email and phone columns in the users table"'})}),"\n",(0,a.jsx)(t.li,{children:(0,a.jsx)(t.em,{children:'"Set the Finance domain on all revenue-related datasets"'})}),"\n",(0,a.jsx)(t.li,{children:(0,a.jsx)(t.em,{children:'"Add documentation describing the purpose of the customers table"'})}),"\n"]}),"\n",(0,a.jsx)(t.h2,{id:"build-the-flow",children:"Build the flow"}),"\n",(0,a.jsx)(t.h3,{id:"1-add-the-agent",children:"1. Add the Agent"}),"\n",(0,a.jsxs)(t.ol,{children:["\n",(0,a.jsxs)(t.li,{children:["In the Langflow ",(0,a.jsx)(t.strong,{children:"Workspace"}),", add an ",(0,a.jsx)(t.strong,{children:"Agent"})," component."]}),"\n",(0,a.jsxs)(t.li,{children:["Add an ",(0,a.jsx)(t.strong,{children:"OpenAI"})," model component and connect it to the Agent's ",(0,a.jsx)(t.strong,{children:"Model"})," port."]}),"\n",(0,a.jsxs)(t.li,{children:["Paste your OpenAI API key in the model component (or use a ",(0,a.jsx)(t.a,{href:"/configuration-global-variables",children:"global variable"}),")."]}),"\n"]}),"\n",(0,a.jsx)(t.h3,{id:"2-add-datahub-tools",children:"2. Add DataHub tools"}),"\n",(0,a.jsxs)(t.p,{children:["Add the following DataHub components to the workspace, and connect each one's ",(0,a.jsx)(t.strong,{children:"Tool"})," output to the Agent's ",(0,a.jsx)(t.strong,{children:"Tools"})," port:"]}),"\n",(0,a.jsxs)(t.table,{children:[(0,a.jsx)(t.thead,{children:(0,a.jsxs)(t.tr,{children:[(0,a.jsx)(t.th,{children:"Component"}),(0,a.jsx)(t.th,{children:"Purpose"})]})}),(0,a.jsxs)(t.tbody,{children:[(0,a.jsxs)(t.tr,{children:[(0,a.jsx)(t.td,{children:(0,a.jsx)(t.strong,{children:"DataHub Search"})}),(0,a.jsx)(t.td,{children:"Discover datasets, dashboards, and other entities by keyword"})]}),(0,a.jsxs)(t.tr,{children:[(0,a.jsx)(t.td,{children:(0,a.jsx)(t.strong,{children:"DataHub Get Metadata"})}),(0,a.jsx)(t.td,{children:"Retrieve full entity profiles (schema, ownership, tags, terms)"})]}),(0,a.jsxs)(t.tr,{children:[(0,a.jsx)(t.td,{children:(0,a.jsx)(t.strong,{children:"DataHub Lineage"})}),(0,a.jsx)(t.td,{children:"Explore upstream/downstream data dependencies"})]}),(0,a.jsxs)(t.tr,{children:[(0,a.jsx)(t.td,{children:(0,a.jsx)(t.strong,{children:"DataHub Add Documentation"})}),(0,a.jsx)(t.td,{children:"Write or update entity and column descriptions"})]}),(0,a.jsxs)(t.tr,{children:[(0,a.jsx)(t.td,{children:(0,a.jsx)(t.strong,{children:"DataHub Manage Tags"})}),(0,a.jsx)(t.td,{children:"Add or remove classification tags"})]}),(0,a.jsxs)(t.tr,{children:[(0,a.jsx)(t.td,{children:(0,a.jsx)(t.strong,{children:"DataHub Manage Glossary Terms"})}),(0,a.jsx)(t.td,{children:"Associate business glossary terms"})]}),(0,a.jsxs)(t.tr,{children:[(0,a.jsx)(t.td,{children:(0,a.jsx)(t.strong,{children:"DataHub Manage Domains"})}),(0,a.jsx)(t.td,{children:"Assign entities to business domains"})]})]})]}),"\n",(0,a.jsxs)(t.p,{children:["Configure the ",(0,a.jsx)(t.strong,{children:"GraphQL Endpoint"})," and ",(0,a.jsx)(t.strong,{children:"Access Token"})," on each DataHub component. Use a global variable for the access token so you only enter it once."]}),"\n",(0,a.jsx)(t.admonition,{type:"tip",children:(0,a.jsx)(t.p,{children:"You don't need to include every DataHub component. Start with Search + Get Metadata for a read-only explorer, then add write tools as needed."})}),"\n",(0,a.jsx)(t.h3,{id:"3-add-chat-input-and-output",children:"3. Add Chat Input and Output"}),"\n",(0,a.jsxs)(t.ol,{children:["\n",(0,a.jsxs)(t.li,{children:["Add a ",(0,a.jsx)(t.strong,{children:"Chat Input"})," component and connect it to the Agent's ",(0,a.jsx)(t.strong,{children:"Input"})," port."]}),"\n",(0,a.jsxs)(t.li,{children:["Add a ",(0,a.jsx)(t.strong,{children:"Chat Output"})," component and connect the Agent's ",(0,a.jsx)(t.strong,{children:"Output"})," port to it."]}),"\n"]}),"\n",(0,a.jsx)(t.h3,{id:"4-optional-add-system-prompt-context",children:"4. (Optional) Add system prompt context"}),"\n",(0,a.jsxs)(t.p,{children:["For best results, add a ",(0,a.jsx)(t.strong,{children:"Prompt"})," component connected to the Agent's ",(0,a.jsx)(t.strong,{children:"System Message"})," port with context about your data ecosystem. For example:"]}),"\n",(0,a.jsx)(l.Code,{codeConfig:h,northPanel:{tabs:[""],active:"",heightRatio:1},files:[{name:"",focus:"",code:{lines:[{tokens:[{content:"You are a data governance assistant with access to DataHub.",props:{}}]},{tokens:[{content:"You help users discover datasets, understand data lineage,",props:{}}]},{tokens:[{content:"and enrich metadata with documentation, tags, glossary terms, and domains.",props:{}}]},{tokens:[{content:"",props:{}}]},{tokens:[{content:"When users ask about data, use the DataHub Search tool first to find relevant entities.",props:{}}]},{tokens:[{content:"When they want details, use Get Metadata to retrieve the full profile.",props:{}}]},{tokens:[{content:"For impact analysis questions, use Lineage to trace dependencies.",props:{}}]},{tokens:[{content:"",props:{}}]},{tokens:[{content:"When enriching metadata:",props:{}}]},{tokens:[{content:"- Use Add Documentation for entity or column descriptions (Markdown is supported)",props:{}}]},{tokens:[{content:"- Use Manage Tags for classification labels like PII, Sensitive, or Deprecated",props:{}}]},{tokens:[{content:"- Use Manage Glossary Terms for business vocabulary (e.g., Revenue, Customer ID)",props:{}}]},{tokens:[{content:"- Use Manage Domains for organizational hierarchy (e.g., Finance, Marketing)",props:{}}]},{tokens:[{content:"",props:{}}]},{tokens:[{content:"Always confirm with the user before making changes to metadata.",props:{}}]},{tokens:[{content:"Always provide the entity URN when referencing specific entities.",props:{}}]}],lang:"text"},annotations:[]}]}),"\n",(0,a.jsx)(t.h2,{id:"example-conversations",children:"Example conversations"}),"\n",(0,a.jsx)(t.h3,{id:"data-discovery",children:"Data discovery"}),"\n",(0,a.jsx)(l.Code,{codeConfig:h,northPanel:{tabs:[""],active:"",heightRatio:1},files:[{name:"",focus:"",code:{lines:[{tokens:[{content:"User: Find datasets related to customer orders",props:{}}]},{tokens:[{content:"",props:{}}]},{tokens:[{content:'Agent: I found 3 datasets matching "customer orders":',props:{}}]},{tokens:[{content:"1. urn:li:dataset:(urn:li:dataPlatform:snowflake,analytics.orders,PROD)",props:{}}]},{tokens:[{content:"   - Platform: Snowflake",props:{}}]},{tokens:[{content:'   - Description: "Customer order transactions"',props:{}}]},{tokens:[{content:"2. urn:li:dataset:(urn:li:dataPlatform:snowflake,analytics.order_items,PROD)",props:{}}]},{tokens:[{content:"   - Platform: Snowflake",props:{}}]},{tokens:[{content:'   - Description: "Line items for customer orders"',props:{}}]},{tokens:[{content:"3. urn:li:dataset:(urn:li:dataPlatform:bigquery,warehouse.customer_orders,PROD)",props:{}}]},{tokens:[{content:"   - Platform: BigQuery",props:{}}]},{tokens:[{content:'   - Description: "Aggregated customer order summary"',props:{}}]}],lang:"text"},annotations:[]}]}),"\n",(0,a.jsx)(t.h3,{id:"metadata-inspection",children:"Metadata inspection"}),"\n",(0,a.jsx)(l.Code,{codeConfig:h,northPanel:{tabs:[""],active:"",heightRatio:1},files:[{name:"",focus:"",code:{lines:[{tokens:[{content:"User: Show me the schema and owners of the first one",props:{}}]},{tokens:[{content:"",props:{}}]},{tokens:[{content:"Agent: Here's the full profile for the orders dataset:",props:{}}]},{tokens:[{content:"",props:{}}]},{tokens:[{content:"**Schema fields:**",props:{}}]},{tokens:[{content:"| Field | Type | Description |",props:{}}]},{tokens:[{content:"|-------|------|-------------|",props:{}}]},{tokens:[{content:"| order_id | NUMBER | Primary key |",props:{}}]},{tokens:[{content:"| customer_id | NUMBER | Foreign key to customers |",props:{}}]},{tokens:[{content:"| order_date | TIMESTAMP | When the order was placed |",props:{}}]},{tokens:[{content:"| total_amount | NUMBER | Order total in USD |",props:{}}]},{tokens:[{content:"| status | STRING | Order status (pending/shipped/delivered) |",props:{}}]},{tokens:[{content:"",props:{}}]},{tokens:[{content:"**Owners:** @jane.smith (Data Owner), @analytics-team (Technical Owner)",props:{}}]},{tokens:[{content:"**Tags:** production, tier-1",props:{}}]},{tokens:[{content:"**Domain:** Commerce",props:{}}]}],lang:"text"},annotations:[]}]}),"\n",(0,a.jsx)(t.h3,{id:"impact-analysis",children:"Impact analysis"}),"\n",(0,a.jsx)(l.Code,{codeConfig:h,northPanel:{tabs:[""],active:"",heightRatio:1},files:[{name:"",focus:"",code:{lines:[{tokens:[{content:"User: What downstream tables would be affected if I change the orders schema?",props:{}}]},{tokens:[{content:"",props:{}}]},{tokens:[{content:"Agent: I found 5 downstream dependencies of the orders dataset:",props:{}}]},{tokens:[{content:"1. analytics.order_metrics (1 hop) \u2014 Snowflake",props:{}}]},{tokens:[{content:"2. analytics.revenue_dashboard (2 hops) \u2014 Looker Dashboard",props:{}}]},{tokens:[{content:"3. ml.customer_churn_features (2 hops) \u2014 Snowflake",props:{}}]},{tokens:[{content:"4. reporting.weekly_sales (2 hops) \u2014 BigQuery",props:{}}]},{tokens:[{content:"5. analytics.order_items (1 hop) \u2014 Snowflake",props:{}}]},{tokens:[{content:"",props:{}}]},{tokens:[{content:"Changes to the orders schema could impact all 5 downstream assets.",props:{}}]},{tokens:[{content:"I recommend reviewing each before making changes.",props:{}}]}],lang:"text"},annotations:[]}]}),"\n",(0,a.jsx)(t.h3,{id:"metadata-enrichment",children:"Metadata enrichment"}),"\n",(0,a.jsx)(l.Code,{codeConfig:h,northPanel:{tabs:[""],active:"",heightRatio:1},files:[{name:"",focus:"",code:{lines:[{tokens:[{content:"User: Add PII tags to the customer_id and email columns in the orders table",props:{}}]},{tokens:[{content:"",props:{}}]},{tokens:[{content:"Agent: I'll add the PII tag to those columns. Let me confirm:",props:{}}]},{tokens:[{content:"- Tag: urn:li:tag:PII",props:{}}]},{tokens:[{content:"- Entity: urn:li:dataset:(urn:li:dataPlatform:snowflake,analytics.orders,PROD)",props:{}}]},{tokens:[{content:"- Columns: customer_id, email",props:{}}]},{tokens:[{content:"",props:{}}]},{tokens:[{content:"Shall I proceed?",props:{}}]},{tokens:[{content:"",props:{}}]},{tokens:[{content:"User: Yes",props:{}}]},{tokens:[{content:"",props:{}}]},{tokens:[{content:"Agent: Done! PII tag has been added to both columns:",props:{}}]},{tokens:[{content:"\u2705 customer_id \u2014 tagged with PII",props:{}}]},{tokens:[{content:"\u2705 email \u2014 tagged with PII",props:{}}]}],lang:"text"},annotations:[]}]}),"\n",(0,a.jsx)(t.h2,{id:"best-practices",children:"Best practices"}),"\n",(0,a.jsx)(t.h3,{id:"start-read-only",children:"Start read-only"}),"\n",(0,a.jsx)(t.p,{children:"Begin with Search, Get Metadata, and Lineage tools to explore your data. Add write tools once you're comfortable with the agent's behavior."}),"\n",(0,a.jsx)(t.h3,{id:"use-specific-prompts",children:"Use specific prompts"}),"\n",(0,a.jsx)(t.p,{children:"Guide the agent with clear system prompts about your data conventions, naming standards, and governance policies."}),"\n",(0,a.jsx)(t.h3,{id:"validate-before-writing",children:"Validate before writing"}),"\n",(0,a.jsx)(t.p,{children:"Include instructions in your system prompt to always confirm with the user before modifying metadata."}),"\n",(0,a.jsx)(t.h3,{id:"batch-operations",children:"Batch operations"}),"\n",(0,a.jsx)(t.p,{children:"For bulk enrichment tasks, describe the pattern and let the agent iterate. For example:"}),"\n",(0,a.jsxs)(t.ul,{children:["\n",(0,a.jsx)(t.li,{children:(0,a.jsx)(t.em,{children:"\"Add the PII tag to all columns named 'email' or 'phone' across all datasets\""})}),"\n",(0,a.jsx)(t.li,{children:(0,a.jsx)(t.em,{children:'"Set the Finance domain on all datasets in the finance schema"'})}),"\n"]}),"\n",(0,a.jsx)(t.h3,{id:"combine-with-mcp",children:"Combine with MCP"}),"\n",(0,a.jsx)(t.p,{children:"The DataHub MCP Server component can complement the direct GraphQL components. Use MCP for dynamic tool discovery and the direct components for write operations."}),"\n",(0,a.jsx)(t.h2,{id:"additional-resources",children:"Additional resources"}),"\n",(0,a.jsxs)(t.ul,{children:["\n",(0,a.jsx)(t.li,{children:(0,a.jsx)(t.a,{href:"/integrations/datahub/setup",children:"DataHub setup in Langflow"})}),"\n",(0,a.jsx)(t.li,{children:(0,a.jsx)(t.a,{href:"/integrations/datahub/technical-reference",children:"DataHub technical reference"})}),"\n",(0,a.jsx)(t.li,{children:(0,a.jsx)(t.a,{href:"/components-agents",children:"Agent component reference"})}),"\n",(0,a.jsx)(t.li,{children:(0,a.jsx)(t.a,{href:"https://datahubproject.io/docs/api/graphql/overview",children:"DataHub GraphQL API"})}),"\n"]})]})}function m(e={}){const{wrapper:t}={...(0,s.R)(),...e.components};return t?(0,a.jsx)(t,{...e,children:(0,a.jsx)(u,{...e})}):u(e)}function g(e,t){throw new Error("Expected "+(t?"component":"object")+" `"+e+"` to be defined: you likely forgot to import, pass, or provide it.")}}}]);