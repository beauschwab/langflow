"use strict";(self.webpackChunklangflow_docs=self.webpackChunklangflow_docs||[]).push([[4895],{59411:(e,s,t)=>{t.r(s),t.d(s,{CH:()=>a,assets:()=>d,chCodeConfig:()=>h,contentTitle:()=>c,default:()=>j,frontMatter:()=>i,metadata:()=>n,toc:()=>p});const n=JSON.parse('{"id":"Agents/agents-skills-architecture","title":"Skills architecture","description":"This page describes the internal architecture of the progressive skill disclosure system for developers who want to extend, customize, or debug skill behavior.","source":"@site/docs/Agents/agents-skills-architecture.md","sourceDirName":"Agents","slug":"/agents-skills-architecture","permalink":"/agents-skills-architecture","draft":false,"unlisted":false,"tags":[],"version":"current","frontMatter":{"title":"Skills architecture","slug":"/agents-skills-architecture"},"sidebar":"docs","previous":{"title":"Deep Agent skills","permalink":"/agents-deep-agent-skills"},"next":{"title":"API keys","permalink":"/configuration-api-keys"}}');var l=t(74848),o=t(28453),r=t(24754);const i={title:"Skills architecture",slug:"/agents-skills-architecture"},c="Progressive skill disclosure \u2014 Technical architecture",d={},a={annotations:r.hk,Code:r.Cy},h={staticMediaQuery:"not screen, (max-width: 768px)",lineNumbers:!0,showCopyButton:!0,themeName:"github-dark"},p=[{value:"System overview",id:"system-overview",level:2},{value:"Backend components",id:"backend-components",level:2},{value:"SkillStore (<code>langflow/base/agents/skills.py</code>)",id:"skillstore-langflowbaseagentsskillspy",level:3},{value:"Data types",id:"data-types",level:4},{value:"Key methods",id:"key-methods",level:4},{value:"Caching strategy",id:"caching-strategy",level:4},{value:"Security",id:"security",level:4},{value:"Skill tools (<code>langflow/base/agents/skill_tools.py</code>)",id:"skill-tools-langflowbaseagentsskill_toolspy",level:3},{value:"Tools created",id:"tools-created",level:4},{value:"DeepAgentComponent integration (<code>langflow/components/agents/deep_agent.py</code>)",id:"deepagentcomponent-integration-langflowcomponentsagentsdeep_agentpy",level:3},{value:"Inputs",id:"inputs",level:4},{value:"<code>_build_skills_tools()</code> method",id:"_build_skills_tools-method",level:4},{value:"System prompt injection",id:"system-prompt-injection",level:4},{value:"Event streaming (<code>langflow/base/agents/events.py</code>)",id:"event-streaming-langflowbaseagentseventspy",level:3},{value:"Frontend components",id:"frontend-components",level:2},{value:"ContentDisplay.tsx",id:"contentdisplaytsx",level:3},{value:"<code>load_skill</code> renderer",id:"load_skill-renderer",level:4},{value:"<code>read_skill_file</code> renderer",id:"read_skill_file-renderer",level:4},{value:"Agent Manager constants (<code>constants.ts</code>)",id:"agent-manager-constants-constantsts",level:3},{value:"File map",id:"file-map",level:2},{value:"Testing",id:"testing",level:2},{value:"Extending the system",id:"extending-the-system",level:2},{value:"Adding a new skill",id:"adding-a-new-skill",level:3},{value:"Adding skill tools to a custom agent component",id:"adding-skill-tools-to-a-custom-agent-component",level:3},{value:"Customizing the catalog format",id:"customizing-the-catalog-format",level:3}];function x(e){const s={a:"a",code:"code",h1:"h1",h2:"h2",h3:"h3",h4:"h4",header:"header",li:"li",ol:"ol",p:"p",strong:"strong",table:"table",tbody:"tbody",td:"td",th:"th",thead:"thead",tr:"tr",ul:"ul",...(0,o.R)(),...e.components};return a||g("CH",!1),a.Code||g("CH.Code",!0),(0,l.jsxs)(l.Fragment,{children:[(0,l.jsx)("style",{dangerouslySetInnerHTML:{__html:'[data-ch-theme="github-dark"] {  --ch-t-colorScheme: dark;--ch-t-foreground: #c9d1d9;--ch-t-background: #0d1117;--ch-t-lighter-inlineBackground: #0d1117e6;--ch-t-editor-background: #0d1117;--ch-t-editor-foreground: #c9d1d9;--ch-t-editor-lineHighlightBackground: #6e76811a;--ch-t-editor-rangeHighlightBackground: #ffffff0b;--ch-t-editor-infoForeground: #3794FF;--ch-t-editor-selectionBackground: #264F78;--ch-t-focusBorder: #1f6feb;--ch-t-tab-activeBackground: #0d1117;--ch-t-tab-activeForeground: #c9d1d9;--ch-t-tab-inactiveBackground: #010409;--ch-t-tab-inactiveForeground: #8b949e;--ch-t-tab-border: #30363d;--ch-t-tab-activeBorder: #0d1117;--ch-t-editorGroup-border: #30363d;--ch-t-editorGroupHeader-tabsBackground: #010409;--ch-t-editorLineNumber-foreground: #6e7681;--ch-t-input-background: #0d1117;--ch-t-input-foreground: #c9d1d9;--ch-t-input-border: #30363d;--ch-t-icon-foreground: #8b949e;--ch-t-sideBar-background: #010409;--ch-t-sideBar-foreground: #c9d1d9;--ch-t-sideBar-border: #30363d;--ch-t-list-activeSelectionBackground: #6e768166;--ch-t-list-activeSelectionForeground: #c9d1d9;--ch-t-list-hoverBackground: #6e76811a;--ch-t-list-hoverForeground: #c9d1d9; }'}}),"\n",(0,l.jsx)(s.header,{children:(0,l.jsx)(s.h1,{id:"progressive-skill-disclosure--technical-architecture",children:"Progressive skill disclosure \u2014 Technical architecture"})}),"\n",(0,l.jsx)(s.p,{children:"This page describes the internal architecture of the progressive skill disclosure system for developers who want to extend, customize, or debug skill behavior."}),"\n",(0,l.jsxs)(s.p,{children:["For end-user documentation, see ",(0,l.jsx)(s.a,{href:"/agents-deep-agent-skills",children:"Deep Agent skills"}),"."]}),"\n",(0,l.jsx)(s.h2,{id:"system-overview",children:"System overview"}),"\n",(0,l.jsx)(s.p,{children:"The skills system adds domain-knowledge loading capabilities to the Deep Agent through a three-tier progressive loading pattern. Instead of stuffing all domain knowledge into the system prompt, the agent discovers skills from a lightweight catalog and loads detailed instructions on demand."}),"\n",(0,l.jsx)(a.Code,{codeConfig:h,northPanel:{tabs:[""],active:"",heightRatio:1},files:[{name:"",focus:"",code:{lines:[{tokens:[{content:"\u250c\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2510",props:{}}]},{tokens:[{content:"\u2502                     System Prompt                       \u2502",props:{}}]},{tokens:[{content:"\u2502                                                         \u2502",props:{}}]},{tokens:[{content:"\u2502  \u250c\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2510  \u2502",props:{}}]},{tokens:[{content:"\u2502  \u2502  Skill Catalog (Tier 0)                           \u2502  \u2502",props:{}}]},{tokens:[{content:"\u2502  \u2502  <skill>                                          \u2502  \u2502",props:{}}]},{tokens:[{content:"\u2502  \u2502    <name>data-analysis</name>                     \u2502  \u2502",props:{}}]},{tokens:[{content:"\u2502  \u2502    <description>Structured data analysis...</description> \u2502",props:{}}]},{tokens:[{content:"\u2502  \u2502    <tags>data, analysis</tags>                    \u2502  \u2502",props:{}}]},{tokens:[{content:"\u2502  \u2502    <supporting_files>examples.md, cheatsheet.md</supporting_files> \u2502",props:{}}]},{tokens:[{content:"\u2502  \u2502  </skill>                                         \u2502  \u2502",props:{}}]},{tokens:[{content:"\u2502  \u2514\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2518  \u2502",props:{}}]},{tokens:[{content:"\u2514\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2518",props:{}}]},{tokens:[{content:"         \u2502                          \u2502",props:{}}]},{tokens:[{content:"         \u25bc                          \u25bc",props:{}}]},{tokens:[{content:'  load_skill("data-analysis")  read_skill_file("data-analysis", "examples.md")',props:{}}]},{tokens:[{content:"  \u250c\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2510             \u250c\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2510",props:{}}]},{tokens:[{content:"  \u2502  Tier 1      \u2502             \u2502  Tier 2      \u2502",props:{}}]},{tokens:[{content:"  \u2502  Full SKILL.md\u2502             \u2502  Supporting  \u2502",props:{}}]},{tokens:[{content:"  \u2502  instructions \u2502             \u2502  files       \u2502",props:{}}]},{tokens:[{content:"  \u2514\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2518             \u2514\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2518",props:{}}]}],lang:"text"},annotations:[]}]}),"\n",(0,l.jsx)(s.h2,{id:"backend-components",children:"Backend components"}),"\n",(0,l.jsxs)(s.h3,{id:"skillstore-langflowbaseagentsskillspy",children:["SkillStore (",(0,l.jsx)(s.code,{children:"langflow/base/agents/skills.py"}),")"]}),"\n",(0,l.jsxs)(s.p,{children:["The ",(0,l.jsx)(s.code,{children:"SkillStore"})," class manages skill discovery, metadata caching, and content loading."]}),"\n",(0,l.jsx)(s.h4,{id:"data-types",children:"Data types"}),"\n",(0,l.jsxs)(s.table,{children:[(0,l.jsx)(s.thead,{children:(0,l.jsxs)(s.tr,{children:[(0,l.jsx)(s.th,{children:"Class"}),(0,l.jsx)(s.th,{children:"Purpose"})]})}),(0,l.jsxs)(s.tbody,{children:[(0,l.jsxs)(s.tr,{children:[(0,l.jsx)(s.td,{children:(0,l.jsx)(s.code,{children:"SkillMetadata"})}),(0,l.jsx)(s.td,{children:"Dataclass holding parsed YAML frontmatter (name, description, version, tags, dependencies, path)."})]}),(0,l.jsxs)(s.tr,{children:[(0,l.jsx)(s.td,{children:(0,l.jsx)(s.code,{children:"ParsedSkill"})}),(0,l.jsxs)(s.td,{children:["Dataclass holding both ",(0,l.jsx)(s.code,{children:"SkillMetadata"})," and the full markdown body content."]})]})]})]}),"\n",(0,l.jsx)(s.h4,{id:"key-methods",children:"Key methods"}),"\n",(0,l.jsxs)(s.table,{children:[(0,l.jsx)(s.thead,{children:(0,l.jsxs)(s.tr,{children:[(0,l.jsx)(s.th,{children:"Method"}),(0,l.jsx)(s.th,{children:"Description"})]})}),(0,l.jsxs)(s.tbody,{children:[(0,l.jsxs)(s.tr,{children:[(0,l.jsx)(s.td,{children:(0,l.jsx)(s.code,{children:"scan()"})}),(0,l.jsxs)(s.td,{children:["Walks the skills directory for ",(0,l.jsx)(s.code,{children:"SKILL.md"})," files. Parses only YAML frontmatter (fast). Returns the number of skills discovered."]})]}),(0,l.jsxs)(s.tr,{children:[(0,l.jsx)(s.td,{children:(0,l.jsx)(s.code,{children:"load(skill_name)"})}),(0,l.jsxs)(s.td,{children:["Parses the full markdown body of a skill. Caches the result for subsequent calls. Returns ",(0,l.jsx)(s.code,{children:"None"})," if not found."]})]}),(0,l.jsxs)(s.tr,{children:[(0,l.jsx)(s.td,{children:(0,l.jsx)(s.code,{children:"read_supporting_file(skill_name, filename)"})}),(0,l.jsxs)(s.td,{children:["Reads a supporting ",(0,l.jsx)(s.code,{children:".md"})," file from a skill's directory. Validates filenames to prevent directory traversal."]})]}),(0,l.jsxs)(s.tr,{children:[(0,l.jsx)(s.td,{children:(0,l.jsx)(s.code,{children:"list_supporting_files(skill_name)"})}),(0,l.jsxs)(s.td,{children:["Lists all ",(0,l.jsx)(s.code,{children:".md"})," files in a skill directory except ",(0,l.jsx)(s.code,{children:"SKILL.md"}),"."]})]}),(0,l.jsxs)(s.tr,{children:[(0,l.jsx)(s.td,{children:(0,l.jsx)(s.code,{children:"get_skill_catalog()"})}),(0,l.jsx)(s.td,{children:"Generates an XML-structured catalog of all skills for system prompt injection."})]}),(0,l.jsxs)(s.tr,{children:[(0,l.jsx)(s.td,{children:(0,l.jsx)(s.code,{children:"get_skill_names()"})}),(0,l.jsx)(s.td,{children:"Returns a list of all registered skill names."})]}),(0,l.jsxs)(s.tr,{children:[(0,l.jsx)(s.td,{children:(0,l.jsx)(s.code,{children:"invalidate()"})}),(0,l.jsx)(s.td,{children:"Clears all caches and forces a rescan on next access."})]})]})]}),"\n",(0,l.jsx)(s.h4,{id:"caching-strategy",children:"Caching strategy"}),"\n",(0,l.jsxs)(s.ul,{children:["\n",(0,l.jsxs)(s.li,{children:[(0,l.jsx)(s.strong,{children:"Metadata cache"}),": Populated during ",(0,l.jsx)(s.code,{children:"scan()"}),". Maps skill name \u2192 ",(0,l.jsx)(s.code,{children:"SkillMetadata"}),". Persists for the lifetime of the ",(0,l.jsx)(s.code,{children:"SkillStore"})," instance."]}),"\n",(0,l.jsxs)(s.li,{children:[(0,l.jsx)(s.strong,{children:"Content cache"}),": Populated lazily on first ",(0,l.jsx)(s.code,{children:"load()"})," call per skill. Maps skill name \u2192 ",(0,l.jsx)(s.code,{children:"ParsedSkill"}),". Persists for the lifetime of the instance."]}),"\n",(0,l.jsxs)(s.li,{children:[(0,l.jsx)(s.strong,{children:"Supporting files"}),": Not cached. Read from disk on every ",(0,l.jsx)(s.code,{children:"read_supporting_file()"})," call."]}),"\n"]}),"\n",(0,l.jsx)(s.h4,{id:"security",children:"Security"}),"\n",(0,l.jsxs)(s.p,{children:["The ",(0,l.jsx)(s.code,{children:"read_skill_supporting_file()"})," function validates filenames:"]}),"\n",(0,l.jsxs)(s.ol,{children:["\n",(0,l.jsxs)(s.li,{children:["Rejects filenames containing ",(0,l.jsx)(s.code,{children:".."})]}),"\n",(0,l.jsxs)(s.li,{children:["Rejects absolute paths (starting with ",(0,l.jsx)(s.code,{children:"/"})," or ",(0,l.jsx)(s.code,{children:"\\"}),")"]}),"\n",(0,l.jsx)(s.li,{children:"Resolves the full path and verifies it remains within the skill directory"}),"\n"]}),"\n",(0,l.jsxs)(s.h3,{id:"skill-tools-langflowbaseagentsskill_toolspy",children:["Skill tools (",(0,l.jsx)(s.code,{children:"langflow/base/agents/skill_tools.py"}),")"]}),"\n",(0,l.jsxs)(s.p,{children:["The ",(0,l.jsx)(s.code,{children:"create_skill_tools()"})," factory function creates two LangChain ",(0,l.jsx)(s.code,{children:"StructuredTool"})," instances bound to a ",(0,l.jsx)(s.code,{children:"SkillStore"})," instance via closure."]}),"\n",(0,l.jsx)(s.h4,{id:"tools-created",children:"Tools created"}),"\n",(0,l.jsxs)(s.table,{children:[(0,l.jsx)(s.thead,{children:(0,l.jsxs)(s.tr,{children:[(0,l.jsx)(s.th,{children:"Tool"}),(0,l.jsx)(s.th,{children:"Input schema"}),(0,l.jsx)(s.th,{children:"Returns"})]})}),(0,l.jsxs)(s.tbody,{children:[(0,l.jsxs)(s.tr,{children:[(0,l.jsx)(s.td,{children:(0,l.jsx)(s.code,{children:"load_skill"})}),(0,l.jsx)(s.td,{children:(0,l.jsx)(s.code,{children:"LoadSkillInput(skill_name: str)"})}),(0,l.jsxs)(s.td,{children:["JSON with ",(0,l.jsx)(s.code,{children:"skill_name"}),", ",(0,l.jsx)(s.code,{children:"description"}),", ",(0,l.jsx)(s.code,{children:"instructions"}),", and ",(0,l.jsx)(s.code,{children:"available_files"}),". On error: ",(0,l.jsx)(s.code,{children:"error"})," and ",(0,l.jsx)(s.code,{children:"available_skills"}),"."]})]}),(0,l.jsxs)(s.tr,{children:[(0,l.jsx)(s.td,{children:(0,l.jsx)(s.code,{children:"read_skill_file"})}),(0,l.jsx)(s.td,{children:(0,l.jsx)(s.code,{children:"ReadSkillFileInput(skill_name: str, filename: str)"})}),(0,l.jsxs)(s.td,{children:["JSON with ",(0,l.jsx)(s.code,{children:"skill_name"}),", ",(0,l.jsx)(s.code,{children:"filename"}),", and ",(0,l.jsx)(s.code,{children:"content"}),". On error: ",(0,l.jsx)(s.code,{children:"error"})," message."]})]})]})]}),"\n",(0,l.jsx)(s.p,{children:"Both tools return JSON strings for structured LLM parsing. Tool descriptions are dynamically set to include the list of available skill names, so the LLM sees valid options in the tool schema."}),"\n",(0,l.jsxs)(s.h3,{id:"deepagentcomponent-integration-langflowcomponentsagentsdeep_agentpy",children:["DeepAgentComponent integration (",(0,l.jsx)(s.code,{children:"langflow/components/agents/deep_agent.py"}),")"]}),"\n",(0,l.jsx)(s.p,{children:"The Deep Agent component integrates skills through the following additions:"}),"\n",(0,l.jsx)(s.h4,{id:"inputs",children:"Inputs"}),"\n",(0,l.jsxs)(s.table,{children:[(0,l.jsx)(s.thead,{children:(0,l.jsxs)(s.tr,{children:[(0,l.jsx)(s.th,{children:"Input"}),(0,l.jsx)(s.th,{children:"Type"}),(0,l.jsx)(s.th,{children:"Default"}),(0,l.jsx)(s.th,{children:"Description"})]})}),(0,l.jsxs)(s.tbody,{children:[(0,l.jsxs)(s.tr,{children:[(0,l.jsx)(s.td,{children:(0,l.jsx)(s.code,{children:"enable_skills"})}),(0,l.jsx)(s.td,{children:"Boolean"}),(0,l.jsx)(s.td,{children:(0,l.jsx)(s.code,{children:"False"})}),(0,l.jsxs)(s.td,{children:["Enables the skills capability. Adds ",(0,l.jsx)(s.code,{children:"load_skill"})," and ",(0,l.jsx)(s.code,{children:"read_skill_file"})," tools."]})]}),(0,l.jsxs)(s.tr,{children:[(0,l.jsx)(s.td,{children:(0,l.jsx)(s.code,{children:"skills_directory"})}),(0,l.jsx)(s.td,{children:"String"}),(0,l.jsx)(s.td,{children:(0,l.jsx)(s.code,{children:'""'})}),(0,l.jsxs)(s.td,{children:["Path to directory with skill subdirectories. Visibility toggles with ",(0,l.jsx)(s.code,{children:"enable_skills"}),"."]})]})]})]}),"\n",(0,l.jsxs)(s.h4,{id:"_build_skills_tools-method",children:[(0,l.jsx)(s.code,{children:"_build_skills_tools()"})," method"]}),"\n",(0,l.jsxs)(s.p,{children:["When ",(0,l.jsx)(s.code,{children:"enable_skills"})," is ",(0,l.jsx)(s.code,{children:"True"})," and ",(0,l.jsx)(s.code,{children:"skills_directory"})," is set:"]}),"\n",(0,l.jsxs)(s.ol,{children:["\n",(0,l.jsxs)(s.li,{children:["Creates a ",(0,l.jsx)(s.code,{children:"SkillStore"})," instance from the configured directory."]}),"\n",(0,l.jsxs)(s.li,{children:["Calls ",(0,l.jsx)(s.code,{children:"scan()"})," to discover skills."]}),"\n",(0,l.jsxs)(s.li,{children:["Generates the skill catalog via ",(0,l.jsx)(s.code,{children:"get_skill_catalog()"}),"."]}),"\n",(0,l.jsxs)(s.li,{children:["Appends the ",(0,l.jsx)(s.code,{children:"SKILLS_PROMPT_SECTION"})," template (with the catalog) to the system prompt."]}),"\n",(0,l.jsxs)(s.li,{children:["Returns the tools from ",(0,l.jsx)(s.code,{children:"create_skill_tools()"}),"."]}),"\n"]}),"\n",(0,l.jsxs)(s.p,{children:["The skills tools are injected in ",(0,l.jsx)(s.code,{children:"message_response()"})," after summarization and before sub-agent delegation."]}),"\n",(0,l.jsx)(s.h4,{id:"system-prompt-injection",children:"System prompt injection"}),"\n",(0,l.jsx)(s.p,{children:"When skills are enabled, the following section is appended to the agent's system prompt:"}),"\n",(0,l.jsx)(a.Code,{codeConfig:h,northPanel:{tabs:[""],active:"",heightRatio:1},files:[{name:"",focus:"",code:{lines:[{tokens:[{content:"## Skills system",props:{}}]},{tokens:[{content:"",props:{}}]},{tokens:[{content:"You have access to a skills system that provides domain expertise",props:{}}]},{tokens:[{content:"via progressive disclosure.",props:{}}]},{tokens:[{content:"",props:{}}]},{tokens:[{content:"### How to use skills",props:{}}]},{tokens:[{content:"",props:{}}]},{tokens:[{content:"1. Browse: Review the skill summaries below.",props:{}}]},{tokens:[{content:"2. Match: When a task aligns with a skill's description, load that skill first.",props:{}}]},{tokens:[{content:"3. Load: Call load_skill(skill_name) to get detailed instructions.",props:{}}]},{tokens:[{content:"4. Inspect: Check available_files in the response for reference documents.",props:{}}]},{tokens:[{content:"5. Reference: Use read_skill_file(skill_name, filename) for specific docs.",props:{}}]},{tokens:[{content:"6. Execute: Apply the skill's guidance to complete the user's task.",props:{}}]},{tokens:[{content:"",props:{}}]},{tokens:[{content:"### Available skills",props:{}}]},{tokens:[{content:"",props:{}}]},{tokens:[{content:"{skill_catalog}",props:{}}]}],lang:"text"},annotations:[]}]}),"\n",(0,l.jsxs)(s.p,{children:["The ",(0,l.jsx)(s.code,{children:"{skill_catalog}"})," placeholder is replaced with the XML-formatted catalog generated by ",(0,l.jsx)(s.code,{children:"SkillStore.get_skill_catalog()"}),"."]}),"\n",(0,l.jsxs)(s.h3,{id:"event-streaming-langflowbaseagentseventspy",children:["Event streaming (",(0,l.jsx)(s.code,{children:"langflow/base/agents/events.py"}),")"]}),"\n",(0,l.jsxs)(s.p,{children:["Two entries were added to the ",(0,l.jsx)(s.code,{children:"DEEP_AGENT_TOOL_DISPLAY"})," dictionary to provide differentiated rendering for skill tools in the chat UI:"]}),"\n",(0,l.jsxs)(s.table,{children:[(0,l.jsx)(s.thead,{children:(0,l.jsxs)(s.tr,{children:[(0,l.jsx)(s.th,{children:"Tool name"}),(0,l.jsx)(s.th,{children:"Icon"}),(0,l.jsx)(s.th,{children:"Title (start)"}),(0,l.jsx)(s.th,{children:"Title (end)"})]})}),(0,l.jsxs)(s.tbody,{children:[(0,l.jsxs)(s.tr,{children:[(0,l.jsx)(s.td,{children:(0,l.jsx)(s.code,{children:"load_skill"})}),(0,l.jsx)(s.td,{children:(0,l.jsx)(s.code,{children:"BookMarked"})}),(0,l.jsx)(s.td,{children:'"Loading skill"'}),(0,l.jsx)(s.td,{children:'"Skill loaded"'})]}),(0,l.jsxs)(s.tr,{children:[(0,l.jsx)(s.td,{children:(0,l.jsx)(s.code,{children:"read_skill_file"})}),(0,l.jsx)(s.td,{children:(0,l.jsx)(s.code,{children:"FileSearch"})}),(0,l.jsx)(s.td,{children:'"Reading skill reference"'}),(0,l.jsx)(s.td,{children:'"Reference loaded"'})]})]})]}),"\n",(0,l.jsxs)(s.p,{children:["These are consumed by ",(0,l.jsx)(s.code,{children:"_get_tool_display()"})," and rendered in the ",(0,l.jsx)(s.code,{children:"handle_on_tool_start"})," / ",(0,l.jsx)(s.code,{children:"handle_on_tool_end"})," event handlers, which create ",(0,l.jsx)(s.code,{children:"ToolContent"})," entries in the agent message's ",(0,l.jsx)(s.code,{children:"content_blocks"}),"."]}),"\n",(0,l.jsx)(s.h2,{id:"frontend-components",children:"Frontend components"}),"\n",(0,l.jsx)(s.h3,{id:"contentdisplaytsx",children:"ContentDisplay.tsx"}),"\n",(0,l.jsxs)(s.p,{children:["Two skill-specific renderers were added to the ",(0,l.jsx)(s.code,{children:"tool_use"})," case in ",(0,l.jsx)(s.code,{children:"ContentDisplay"}),":"]}),"\n",(0,l.jsxs)(s.h4,{id:"load_skill-renderer",children:[(0,l.jsx)(s.code,{children:"load_skill"})," renderer"]}),"\n",(0,l.jsx)(s.p,{children:"Parses the JSON output and displays:"}),"\n",(0,l.jsxs)(s.ul,{children:["\n",(0,l.jsx)(s.li,{children:"Skill name badge (styled inline element)"}),"\n",(0,l.jsx)(s.li,{children:"Description text"}),"\n",(0,l.jsx)(s.li,{children:"Expandable instructions viewer with character count"}),"\n",(0,l.jsx)(s.li,{children:"List of available supporting files"}),"\n"]}),"\n",(0,l.jsxs)(s.h4,{id:"read_skill_file-renderer",children:[(0,l.jsx)(s.code,{children:"read_skill_file"})," renderer"]}),"\n",(0,l.jsx)(s.p,{children:"Parses the JSON output and displays:"}),"\n",(0,l.jsxs)(s.ul,{children:["\n",(0,l.jsx)(s.li,{children:"Skill name badge + filename breadcrumb"}),"\n",(0,l.jsx)(s.li,{children:"Expandable content viewer with character count"}),"\n"]}),"\n",(0,l.jsx)(s.p,{children:"Both renderers handle error responses (showing the error message in red) and fall through to the generic tool renderer if JSON parsing fails."}),"\n",(0,l.jsxs)(s.h3,{id:"agent-manager-constants-constantsts",children:["Agent Manager constants (",(0,l.jsx)(s.code,{children:"constants.ts"}),")"]}),"\n",(0,l.jsxs)(s.p,{children:["The ",(0,l.jsx)(s.code,{children:"AVAILABLE_SKILLS"})," array in the Agent Manager includes preconfigured skills that map to the progressive disclosure system:"]}),"\n",(0,l.jsxs)(s.table,{children:[(0,l.jsx)(s.thead,{children:(0,l.jsxs)(s.tr,{children:[(0,l.jsx)(s.th,{children:"Skill ID"}),(0,l.jsx)(s.th,{children:"Name"}),(0,l.jsx)(s.th,{children:"Description"})]})}),(0,l.jsxs)(s.tbody,{children:[(0,l.jsxs)(s.tr,{children:[(0,l.jsx)(s.td,{children:(0,l.jsx)(s.code,{children:"data-analysis"})}),(0,l.jsx)(s.td,{children:"Data Analysis"}),(0,l.jsx)(s.td,{children:"Structured data analysis workflow for CSV, JSON, and database query results."})]}),(0,l.jsxs)(s.tr,{children:[(0,l.jsx)(s.td,{children:(0,l.jsx)(s.code,{children:"code-review"})}),(0,l.jsx)(s.td,{children:"Code Review"}),(0,l.jsx)(s.td,{children:"Systematic code review with quality checklists and best practices."})]}),(0,l.jsxs)(s.tr,{children:[(0,l.jsx)(s.td,{children:(0,l.jsx)(s.code,{children:"api-design"})}),(0,l.jsx)(s.td,{children:"API Design"}),(0,l.jsx)(s.td,{children:"RESTful API design patterns, versioning, and documentation standards."})]})]})]}),"\n",(0,l.jsxs)(s.p,{children:["These are used in the ",(0,l.jsx)(s.code,{children:"CreateAgentDialog"})," for selecting skills when creating agent profiles."]}),"\n",(0,l.jsx)(s.h2,{id:"file-map",children:"File map"}),"\n",(0,l.jsxs)(s.table,{children:[(0,l.jsx)(s.thead,{children:(0,l.jsxs)(s.tr,{children:[(0,l.jsx)(s.th,{children:"File"}),(0,l.jsx)(s.th,{children:"Layer"}),(0,l.jsx)(s.th,{children:"Purpose"})]})}),(0,l.jsxs)(s.tbody,{children:[(0,l.jsxs)(s.tr,{children:[(0,l.jsx)(s.td,{children:(0,l.jsx)(s.code,{children:"langflow/base/agents/skills.py"})}),(0,l.jsx)(s.td,{children:"Backend"}),(0,l.jsxs)(s.td,{children:[(0,l.jsx)(s.code,{children:"SkillMetadata"}),", ",(0,l.jsx)(s.code,{children:"ParsedSkill"}),", ",(0,l.jsx)(s.code,{children:"SkillStore"})," classes"]})]}),(0,l.jsxs)(s.tr,{children:[(0,l.jsx)(s.td,{children:(0,l.jsx)(s.code,{children:"langflow/base/agents/skill_tools.py"})}),(0,l.jsx)(s.td,{children:"Backend"}),(0,l.jsxs)(s.td,{children:[(0,l.jsx)(s.code,{children:"create_skill_tools()"})," factory, ",(0,l.jsx)(s.code,{children:"LoadSkillInput"}),", ",(0,l.jsx)(s.code,{children:"ReadSkillFileInput"})," schemas"]})]}),(0,l.jsxs)(s.tr,{children:[(0,l.jsx)(s.td,{children:(0,l.jsx)(s.code,{children:"langflow/components/agents/deep_agent.py"})}),(0,l.jsx)(s.td,{children:"Backend"}),(0,l.jsxs)(s.td,{children:[(0,l.jsx)(s.code,{children:"DeepAgentComponent"})," with ",(0,l.jsx)(s.code,{children:"enable_skills"})," toggle and ",(0,l.jsx)(s.code,{children:"_build_skills_tools()"})]})]}),(0,l.jsxs)(s.tr,{children:[(0,l.jsx)(s.td,{children:(0,l.jsx)(s.code,{children:"langflow/base/agents/events.py"})}),(0,l.jsx)(s.td,{children:"Backend"}),(0,l.jsxs)(s.td,{children:[(0,l.jsx)(s.code,{children:"DEEP_AGENT_TOOL_DISPLAY"})," entries for ",(0,l.jsx)(s.code,{children:"load_skill"})," and ",(0,l.jsx)(s.code,{children:"read_skill_file"})]})]}),(0,l.jsxs)(s.tr,{children:[(0,l.jsx)(s.td,{children:(0,l.jsx)(s.code,{children:"ContentDisplay.tsx"})}),(0,l.jsx)(s.td,{children:"Frontend"}),(0,l.jsx)(s.td,{children:"Skill-specific renderers in chat content blocks"})]}),(0,l.jsxs)(s.tr,{children:[(0,l.jsx)(s.td,{children:(0,l.jsx)(s.code,{children:"constants.ts"})}),(0,l.jsx)(s.td,{children:"Frontend"}),(0,l.jsxs)(s.td,{children:[(0,l.jsx)(s.code,{children:"AVAILABLE_SKILLS"})," for Agent Manager"]})]})]})]}),"\n",(0,l.jsx)(s.h2,{id:"testing",children:"Testing"}),"\n",(0,l.jsxs)(s.p,{children:["Skill tests are located in ",(0,l.jsx)(s.code,{children:"src/backend/tests/unit/components/agents/"}),":"]}),"\n",(0,l.jsxs)(s.table,{children:[(0,l.jsx)(s.thead,{children:(0,l.jsxs)(s.tr,{children:[(0,l.jsx)(s.th,{children:"Test file"}),(0,l.jsx)(s.th,{children:"Coverage"})]})}),(0,l.jsxs)(s.tbody,{children:[(0,l.jsxs)(s.tr,{children:[(0,l.jsx)(s.td,{children:(0,l.jsx)(s.code,{children:"test_skill_store.py"})}),(0,l.jsxs)(s.td,{children:[(0,l.jsx)(s.code,{children:"SkillStore"})," scanning, loading, caching, security validation, catalog generation, tool creation and invocation"]})]}),(0,l.jsxs)(s.tr,{children:[(0,l.jsx)(s.td,{children:(0,l.jsx)(s.code,{children:"test_deep_agent_component.py"})}),(0,l.jsx)(s.td,{children:"Skills toggle, directory configuration, tool creation, metadata, build config visibility"})]})]})]}),"\n",(0,l.jsx)(s.p,{children:"Run skill tests with:"}),"\n",(0,l.jsx)(a.Code,{codeConfig:h,northPanel:{tabs:[""],active:"",heightRatio:1},files:[{name:"",focus:"",code:{lines:[{tokens:[{content:"uv ",props:{style:{color:"#FFA657"}}},{content:"run pytest src/backend/tests/unit/components/agents/test_skill_store.py ",props:{style:{color:"#A5D6FF"}}},{content:"-v",props:{style:{color:"#79C0FF"}}}]},{tokens:[{content:"uv ",props:{style:{color:"#FFA657"}}},{content:"run pytest src/backend/tests/unit/components/agents/test_deep_agent_component.py ",props:{style:{color:"#A5D6FF"}}},{content:"-v",props:{style:{color:"#79C0FF"}}}]}],lang:"bash"},annotations:[]}]}),"\n",(0,l.jsx)(s.h2,{id:"extending-the-system",children:"Extending the system"}),"\n",(0,l.jsx)(s.h3,{id:"adding-a-new-skill",children:"Adding a new skill"}),"\n",(0,l.jsxs)(s.ol,{children:["\n",(0,l.jsxs)(s.li,{children:["Create a directory under your skills folder with a ",(0,l.jsx)(s.code,{children:"SKILL.md"})," file."]}),"\n",(0,l.jsxs)(s.li,{children:["Add YAML frontmatter with at least ",(0,l.jsx)(s.code,{children:"name"})," and ",(0,l.jsx)(s.code,{children:"description"}),"."]}),"\n",(0,l.jsx)(s.li,{children:"Write instructions in the markdown body."}),"\n",(0,l.jsxs)(s.li,{children:["Optionally add supporting ",(0,l.jsx)(s.code,{children:".md"})," files for reference material."]}),"\n",(0,l.jsxs)(s.li,{children:["Restart the agent (or call ",(0,l.jsx)(s.code,{children:"store.invalidate()"}),") to pick up new skills."]}),"\n"]}),"\n",(0,l.jsx)(s.h3,{id:"adding-skill-tools-to-a-custom-agent-component",children:"Adding skill tools to a custom agent component"}),"\n",(0,l.jsxs)(s.p,{children:["If you are building a custom agent component that extends ",(0,l.jsx)(s.code,{children:"LCToolsAgentComponent"}),", you can integrate the skills system:"]}),"\n",(0,l.jsx)(a.Code,{codeConfig:h,northPanel:{tabs:[""],active:"",heightRatio:1},files:[{name:"",focus:"",code:{lines:[{tokens:[{content:"from",props:{style:{color:"#FF7B72"}}},{content:" langflow.base.agents.skills ",props:{style:{color:"#C9D1D9"}}},{content:"import",props:{style:{color:"#FF7B72"}}},{content:" SkillStore",props:{style:{color:"#C9D1D9"}}}]},{tokens:[{content:"from",props:{style:{color:"#FF7B72"}}},{content:" langflow.base.agents.skill_tools ",props:{style:{color:"#C9D1D9"}}},{content:"import",props:{style:{color:"#FF7B72"}}},{content:" create_skill_tools",props:{style:{color:"#C9D1D9"}}}]},{tokens:[{content:"",props:{style:{color:"#C9D1D9"}}}]},{tokens:[{content:"# In your component's message_response or build_tools method:",props:{style:{color:"#8B949E"}}}]},{tokens:[{content:"store ",props:{style:{color:"#C9D1D9"}}},{content:"=",props:{style:{color:"#FF7B72"}}},{content:" SkillStore(",props:{style:{color:"#C9D1D9"}}},{content:'"/path/to/skills"',props:{style:{color:"#A5D6FF"}}},{content:")",props:{style:{color:"#C9D1D9"}}}]},{tokens:[{content:"store.scan()",props:{style:{color:"#C9D1D9"}}}]},{tokens:[{content:"",props:{style:{color:"#C9D1D9"}}}]},{tokens:[{content:"# Get the catalog for system prompt injection",props:{style:{color:"#8B949E"}}}]},{tokens:[{content:"catalog ",props:{style:{color:"#C9D1D9"}}},{content:"=",props:{style:{color:"#FF7B72"}}},{content:" store.get_skill_catalog()",props:{style:{color:"#C9D1D9"}}}]},{tokens:[{content:"self",props:{style:{color:"#79C0FF"}}},{content:".system_prompt ",props:{style:{color:"#C9D1D9"}}},{content:"+= f",props:{style:{color:"#FF7B72"}}},{content:'"',props:{style:{color:"#A5D6FF"}}},{content:"\\n\\n",props:{style:{color:"#79C0FF"}}},{content:"## Available Skills",props:{style:{color:"#A5D6FF"}}},{content:"\\n\\n{",props:{style:{color:"#79C0FF"}}},{content:"catalog",props:{style:{color:"#C9D1D9"}}},{content:"}",props:{style:{color:"#79C0FF"}}},{content:'"',props:{style:{color:"#A5D6FF"}}}]},{tokens:[{content:"",props:{style:{color:"#C9D1D9"}}}]},{tokens:[{content:"# Get the tools",props:{style:{color:"#8B949E"}}}]},{tokens:[{content:"skill_tools ",props:{style:{color:"#C9D1D9"}}},{content:"=",props:{style:{color:"#FF7B72"}}},{content:" create_skill_tools(store)",props:{style:{color:"#C9D1D9"}}}]},{tokens:[{content:"self",props:{style:{color:"#79C0FF"}}},{content:".tools.extend(skill_tools)",props:{style:{color:"#C9D1D9"}}}]}],lang:"python"},annotations:[]}]}),"\n",(0,l.jsx)(s.h3,{id:"customizing-the-catalog-format",children:"Customizing the catalog format"}),"\n",(0,l.jsxs)(s.p,{children:["The default catalog uses XML tags. To change the format, subclass ",(0,l.jsx)(s.code,{children:"SkillStore"})," and override ",(0,l.jsx)(s.code,{children:"get_skill_catalog()"}),":"]}),"\n",(0,l.jsx)(a.Code,{codeConfig:h,northPanel:{tabs:[""],active:"",heightRatio:1},files:[{name:"",focus:"",code:{lines:[{tokens:[{content:"class ",props:{style:{color:"#FF7B72"}}},{content:"CustomSkillStore",props:{style:{color:"#FFA657"}}},{content:"(",props:{style:{color:"#C9D1D9"}}},{content:"SkillStore",props:{style:{color:"#79C0FF"}}},{content:"):",props:{style:{color:"#C9D1D9"}}}]},{tokens:[{content:"    def ",props:{style:{color:"#FF7B72"}}},{content:"get_skill_catalog",props:{style:{color:"#D2A8FF"}}},{content:"(self) -> ",props:{style:{color:"#C9D1D9"}}},{content:"str",props:{style:{color:"#79C0FF"}}},{content:":",props:{style:{color:"#C9D1D9"}}}]},{tokens:[{content:'        """Generate a markdown-formatted catalog."""',props:{style:{color:"#A5D6FF"}}}]},{tokens:[{content:"        if not ",props:{style:{color:"#FF7B72"}}},{content:"self",props:{style:{color:"#79C0FF"}}},{content:"._metadata_cache:",props:{style:{color:"#C9D1D9"}}}]},{tokens:[{content:"            return ",props:{style:{color:"#FF7B72"}}},{content:'"No skills available."',props:{style:{color:"#A5D6FF"}}}]},{tokens:[{content:"        lines ",props:{style:{color:"#C9D1D9"}}},{content:"=",props:{style:{color:"#FF7B72"}}},{content:" []",props:{style:{color:"#C9D1D9"}}}]},{tokens:[{content:"        for",props:{style:{color:"#FF7B72"}}},{content:" name, meta ",props:{style:{color:"#C9D1D9"}}},{content:"in ",props:{style:{color:"#FF7B72"}}},{content:"sorted",props:{style:{color:"#79C0FF"}}},{content:"(",props:{style:{color:"#C9D1D9"}}},{content:"self",props:{style:{color:"#79C0FF"}}},{content:"._metadata_cache.items()):",props:{style:{color:"#C9D1D9"}}}]},{tokens:[{content:"            lines.append(",props:{style:{color:"#C9D1D9"}}},{content:"f",props:{style:{color:"#FF7B72"}}},{content:'"- **',props:{style:{color:"#A5D6FF"}}},{content:"{",props:{style:{color:"#79C0FF"}}},{content:"name",props:{style:{color:"#C9D1D9"}}},{content:"}",props:{style:{color:"#79C0FF"}}},{content:"**: ",props:{style:{color:"#A5D6FF"}}},{content:"{",props:{style:{color:"#79C0FF"}}},{content:"meta.description",props:{style:{color:"#C9D1D9"}}},{content:"}",props:{style:{color:"#79C0FF"}}},{content:'"',props:{style:{color:"#A5D6FF"}}},{content:")",props:{style:{color:"#C9D1D9"}}}]},{tokens:[{content:"        return ",props:{style:{color:"#FF7B72"}}},{content:'"',props:{style:{color:"#A5D6FF"}}},{content:"\\n",props:{style:{color:"#79C0FF"}}},{content:'"',props:{style:{color:"#A5D6FF"}}},{content:".join(lines)",props:{style:{color:"#C9D1D9"}}}]}],lang:"python"},annotations:[]}]})]})}function j(e={}){const{wrapper:s}={...(0,o.R)(),...e.components};return s?(0,l.jsx)(s,{...e,children:(0,l.jsx)(x,{...e})}):x(e)}function g(e,s){throw new Error("Expected "+(s?"component":"object")+" `"+e+"` to be defined: you likely forgot to import, pass, or provide it.")}}}]);